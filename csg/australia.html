<!doctype html>
<html lang='en-GB'>

<head>
  <meta charset='utf-8'>
  <title>CSG Field</title>

  <style>
    path {
      fill: #ccc;
      stroke: #fff;
      stroke-width: .5px;
    }
    path:hover {
      fill: red;
    }
  </style>

  <script src='node_modules/ractive/ractive.js' type='text/javascript'></script>
  <script src='node_modules/d3/d3.js'></script>
  <script src='node_modules/topojson/topojson.js'></script>

</head>

<body>

  <h1>CSG Field</h1>

  <div id='container'></div>

  <script id='template' type='text/ractive'>
    <p>Region, {{name}}!</p>
    <p>Selected state, {{selectedState}}!</p>
  </script>


  <script type='text/javascript'>

    var width = 800;
    var height = 600;

    // bounding box:
    // [96.816941408,-43.740509603,159.109219008,-9.142175977]
    //
    var projection = d3.geo.albers()
      .translate([width/2, height/2])
      .center([0, -25])
      .rotate([-132.5, 0])
      .scale(850)
      .parallels([-36, -18]);


    var path = d3.geo.path()
      .projection(projection);

    var svg = d3.select("body").append("svg")
      .attr("width", width)
      .attr("height", height);

    /*
    // working USA map
    //
    d3.json("us.json", function(error, topology) {
      svg.selectAll("path")
        .data(topojson.feature(topology, topology.objects.counties).features)
        .enter().append("path")
        .attr("d", path);
    });
    */

    var g = svg.append("g");

    /*
    d3.json("data/australia.json", function(error, topology) {
      g.selectAll("path")
        .data(topojson.feature(topology, topology.objects.australia).features)
        .enter().append("path")
        .attr("d", path);
    });
*/

    d3.json("data/australia.json", function(json) {


      /*
      for (var i = 0; i < json.lenght; i++) {
       console.log("dkjdejk ");
      }
      */

      g.selectAll("path")
        .data(topojson.feature(json, json.objects.australia).features)
        .enter()
        .append("path")
        .attr("d", path);
    });


  </script>

  <script>

    var ractive = new Ractive({
      el: '#container',
      template: '#template',
      data: { name: 'Queensland', selectedState: 'Hello' },
      init: function() {
        console.log('new container initialised');
      }
    });
  </script>

</body>

</html>
